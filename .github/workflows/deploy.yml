name: Deploy Action
on: 
  push: 
    branches:
      - master
jobs: 
  deploy-to-server:
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Getting Latest code
      uses: actions/checkout@v2
    - name: ðŸŽ€ Setting up environment
      uses: actions/setup-node@v2
      with:
        node-version: '14'
    - name: ðŸ’£ Installing dependencies
      run: npm install
    - name: ðŸ”¨ Building Project
      run: npm run build
    - name: ðŸ“© Exporting Static site
      run: npm run export
    - name: ðŸ“‚ Sync files to server
      uses: SamKirkland/FTP-Deploy-Action@4.0.0
      with:
        server: ideaux.in
        username: ${{ secrets.FTP_USER }}
        password: ${{ secrets.FTP_PASSWORD }}
        server-dir: ./public_html/
        local-dir: ./out/